<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>my imaginary dog - ã•ã‚“ã½</title>
<style>
  :root{
    --choco:#6e5647;
    --white:#fff;
    --shadow:0 10px 25px rgba(0,0,0,.08);
    --radius:16px;
  }
  /* ãƒšãƒ¼ã‚¸å…¨ä½“ï¼†ã‚¹ãƒãƒ›æ  */
  body{
    margin:0;
    min-height:100svh;
    display:grid; place-items:center;
    background:#f7f3ff;
    font-family:"Hiragino Sans","Noto Sans JP","Yu Gothic",system-ui,sans-serif;
    color:var(--choco);
  }
  .phone{
    width:min(420px,96vw);
    aspect-ratio:3/4;
    position:relative;
    border:4px solid #bda9ff;
    border-radius:24px;
    overflow:hidden;
    background:#fff;
    box-shadow:0 12px 40px rgba(0,0,0,.12);
  }

  /* ç”»é¢ï¼ˆPDFï¼‹ãƒœã‚¿ãƒ³ï¼‰ */
  .screen{ position:absolute; inset:0; display:none; }
  .screen.active{ display:block; }

  /* PDFã‚’å…¨é¢ã«æ•·ã */
  .bgwrap{ position:absolute; inset:0; z-index:0; }
  .bgdoc{
    width:100%; height:100%;
    border:0;
    pointer-events:none;
  }
  /* ç”»åƒã‚’ä¸­å¤®é…ç½® */
  .bgwrap picture{
    position:absolute;
    inset:0;
    display:flex;
    align-items:center;
    justify-content:center;
  }
  .bgwrap img{
    width:50%;
    height:50%;
    object-fit:contain;
    /* ãƒ›ãƒ¼ãƒ ç”»é¢ã®çŠ¬ã¨åŒã˜ä½ç½®ã«èª¿æ•´ */
    transform:translateY(-25%);
  }

  /* ã€ã•ã‚“ã½ç”»é¢ç”¨CSSã€‘æ•£æ­©çŠ¶æ…‹ã”ã¨ã®èƒŒæ™¯ã¨ç”»åƒã®åˆ‡ã‚Šæ›¿ãˆç”¨ã‚³ãƒ³ãƒ†ãƒŠ */
  .walk-state {
      position: absolute;
      inset: 0;
      opacity: 0; 
      transition: opacity 0.3s ease;
      z-index: 0;
  }
  .walk-state.active {
      opacity: 1; 
      z-index: 1; 
  }
  /* bgdocã®ã‚¹ã‚¿ã‚¤ãƒ«ã‚’çµ±ä¸€ */
  .bgwrap > .bgdoc, .walk-state > .bgdoc {
      width:100%; height:100%;
      border:0;
      pointer-events:none;
  }

  /* ãƒœã‚¿ãƒ³ç¾¤ï¼ˆèƒŒæ™¯PDFã®ä¸Šï¼‰ */
  .overlay{
    position:absolute; inset:0; z-index:1;
    display:flex; flex-direction:column;
    padding:14px;
  }

  /* ã€ã•ã‚“ã½ç”»é¢ç”¨CSSã€‘æ•£æ­©çŠ¶æ…‹åˆ‡ã‚Šæ›¿ãˆãƒœã‚¿ãƒ³ã®ã‚³ãƒ³ãƒ†ãƒŠã¨ãƒœã‚¿ãƒ³ã®ã‚¹ã‚¿ã‚¤ãƒ« */
  .walk-buttons-container {
      margin-top: auto; 
      margin-bottom: 20px; 
      display: flex;
      justify-content: center;
      width: 100%;
      height: 48px; /* ãƒœã‚¿ãƒ³ã®é«˜ã•ã«åˆã‚ã›ã¦èª¿æ•´ */
  }

  .walk-state-button {
      background: var(--white);
      border: 0; 
      border-radius: 14px;
      padding: 12px 16px;
      font-size: 20px; 
      letter-spacing: .35em;
      color: var(--choco);
      box-shadow: var(--shadow);
      cursor: pointer;
      transition: transform .05s ease, opacity 0.3s ease;
      
      /* å¸¸ã«åŒã˜ä½ç½®ã«é…ç½®ã—ã€ç‰‡æ–¹ã ã‘è¡¨ç¤º */
      position: absolute; 
      width: 80%; 
      max-width: 250px;
      
      opacity: 0;
      pointer-events: none; /* ã‚¯ãƒªãƒƒã‚¯ä¸å¯ã« */
  }

  .walk-state-button.active {
      opacity: 1;
      pointer-events: auto; /* ã‚¯ãƒªãƒƒã‚¯å¯èƒ½ã« */
  }

  .walk-state-button:hover {
      background: #fff8e8;
      box-shadow: 0 8px 20px rgba(0,0,0,.15);
      transform: translateY(-2px);
  }
  .walk-state-button:active{
      background: #ffedc8;
      transform: translateY(1px) scale(.98);
      box-shadow: 0 3px 8px rgba(0,0,0,.1);
  }


  /* å­ç”»é¢ã®å·¦ä¸Šã€Œãƒ›ãƒ¼ãƒ ã¸ã€ */
  .home-icon{
    width:40px; height:40px;
    border-radius:12px;
    background:#fff; box-shadow:var(--shadow);
    display:grid; place-items:center;
    user-select:none; cursor:pointer;
    margin:6px;
    font-weight:700;
  }
  .home-icon:hover {
    background: #fff5e2;
    transform: translateY(-1px);
    box-shadow: 0 6px 12px rgba(0,0,0,.15);
  }
  .home-icon:active{
    transform:translateY(1px);
    box-shadow: 0 3px 6px rgba(0,0,0,.1);
  }

  /* ã€ã•ã‚“ã½ç”»é¢å°‚ç”¨CSSã€‘ãƒ›ãƒ¼ãƒ ã‚¢ã‚¤ã‚³ãƒ³ã®è¦‹ãŸç›®ã‚’ã€Œâ—€ã€ã«ã™ã‚‹ */
  .home-icon a::before {
    content: "ğŸ "; 
    font-size: 16px;
    display: block;
  }
  /* ãƒ›ãƒ¼ãƒ ã‚¢ã‚¤ã‚³ãƒ³å†…ã®aã‚¿ã‚°ã‚’ä¸­å¤®é…ç½® */
  .home-icon a {
    text-decoration: none;
    color: inherit;
    display: grid;
    place-items: center;
    width: 100%;
    height: 100%;
  }

  @media (prefers-reduced-motion: reduce){
    .walk-state-button,
    .home-icon{ transition:none; }
  }
</style>
</head>
<body>
<main class="phone" id="app">

  <section class="screen active" data-screen="walk" aria-label="ã•ã‚“ã½">
    <div class="bgwrap" aria-hidden="true">
      
      <div class="walk-state walk-before active">
        <object class="bgdoc" type="application/pdf"
                data="pdfs/walk-before.pdf#view=Fit&toolbar=0&navpanes=0&scrollbar=0">
          <picture><img src="images/walk.png" alt="" id="walkDogImageBefore"></picture>
        </object>
      </div>

      <div class="walk-state walk-after">
        <object class="bgdoc" type="application/pdf"
                data="pdfs/walk-after.pdf#view=Fit&toolbar=0&navpanes=0&scrollbar=0">
          <picture><img src="images/walk-after.png" alt="" id="walkDogImageAfter"></picture>
        </object>
      </div>
    </div>
    
    <div class="overlay">
      <div class="home-icon" aria-label="ãƒ›ãƒ¼ãƒ ã¸">
        <a href="index.html"></a>
      </div>

      <div class="walk-buttons-container">
        <button class="walk-state-button walk-before-btn active" data-action="go-walk">ã•ã‚“ã½ã«ã„ã</button>
        <button class="walk-state-button walk-after-btn" data-action="go-home">ã‹ãˆã‚‹</button>
      </div>
    </div>
  </section>

</main>

<script>
  // æ•£æ­©ç”»é¢ã®ç”»åƒè¨­å®š (çŠ¬ç¨®ã«ã‚ˆã£ã¦æ•£æ­©å‰å¾Œã®ç”»åƒã‚’å¤‰ãˆã‚‹å ´åˆ)
  // å¿…è¦ã«å¿œã˜ã¦ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã‚’ä¿®æ­£ã—ã¦ãã ã•ã„ã€‚
  const walkDogImages = {
    sizu: {
      before: 'images/sizu.png', // æ•£æ­©å‰ç”»åƒ
      after: 'images/sizu.png'   // æ•£æ­©å¾Œç”»åƒ
    },
    pome: {
      before: 'images/pome.png',
      after: 'images/pome.png'
    },
    shiba: {
      before: 'images/shiba.png',
      after: 'images/shiba.png'
    },
    hasuki: {
      before: 'images/hasuki.png',
      after: 'images/hasuki.png'
    },
    pagu: {
      before: 'images/pagu.png',
      after: 'images/pagu.png'
    },
    kogi: {
      before: 'images/kogi.png',
      after: 'images/kogi.png'
    },
  };


  // URLãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‹ã‚‰çŠ¬ã‚’å–å¾— (ä¾‹: index_sanpo.html?dog=pome)
  const params = new URLSearchParams(window.location.search);
  const selectedDog = params.get('dog') || 'sizu';
  
  const app = document.getElementById('app');

  // æ•£æ­©ç”»é¢ã®çŠ¶æ…‹ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹é–¢æ•°
  function setWalkState(state) { // stateã¯ 'before' ã¾ãŸã¯ 'after'
    // 1. èƒŒæ™¯ã¨çŠ¬ã®ç”»åƒã‚’åˆ‡ã‚Šæ›¿ãˆ
    const dogImageElementId = (state === 'before') ? 'walkDogImageBefore' : 'walkDogImageAfter';
    const dogImageElement = document.getElementById(dogImageElementId);
    
    // é¸æŠã•ã‚ŒãŸçŠ¬ç¨®ã«å¿œã˜ãŸæ•£æ­©ä¸­ã®ç”»åƒã‚’ã‚»ãƒƒãƒˆ
    if(dogImageElement && walkDogImages[selectedDog]) {
      // é©åˆ‡ãªç”»åƒãƒ‘ã‚¹ã‚’ã‚»ãƒƒãƒˆã€‚æœªè¨­å®šã®å ´åˆã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ‘ã‚¹ã‚’ä½¿ç”¨
      dogImageElement.src = walkDogImages[selectedDog][state] || dogImageElement.src; 
    }

    document.querySelectorAll('.walk-state').forEach(el => {
      el.classList.toggle('active', el.classList.contains(`walk-${state}`));
    });

    // 2. ãƒœã‚¿ãƒ³ã‚’åˆ‡ã‚Šæ›¿ãˆ
    document.querySelectorAll('.walk-state-button').forEach(btn => {
      btn.classList.toggle('active', btn.classList.contains(`walk-${state}-btn`));
    });
  }

  // ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³èµ·å‹•æ™‚ã«ã€Œæ•£æ­©å‰ã€ã®çŠ¶æ…‹ã‚’ã‚»ãƒƒãƒˆ
  window.addEventListener('load', () => {
    // ç‹¬ç«‹ãƒšãƒ¼ã‚¸ãªã®ã§ã€åˆæœŸçŠ¶æ…‹ã‚’ 'before' ã«è¨­å®š
    setWalkState('before');
  });


// ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼
app.addEventListener('click', e=>{
Â  Â  // æ•£æ­©ç”»é¢ã®çŠ¶æ…‹åˆ‡ã‚Šæ›¿ãˆãƒœã‚¿ãƒ³ (data-action) ã®å‡¦ç†
Â  Â  const walkBtn = e.target.closest('[data-action]');
Â  Â  if (!walkBtn) return;
Â  Â Â 
Â  Â  const action = walkBtn.getAttribute('data-action');
Â  Â  if (action === 'go-walk') {
Â  Â  Â  Â  // ã€Œã•ã‚“ã½ã«ã„ãã€ãƒœã‚¿ãƒ³ãŒæŠ¼ã•ã‚ŒãŸ -> æ•£æ­©å¾ŒçŠ¶æ…‹ã¸
Â  Â  Â  Â  setWalkState('after');
Â  Â  } else if (action === 'go-home') {
Â  Â  Â  Â  // ã€å¤‰æ›´å¾Œã€‘ã€Œã‹ãˆã‚‹ã€ãƒœã‚¿ãƒ³ãŒæŠ¼ã•ã‚ŒãŸ -> æ•£æ­©å‰ã®çŠ¶æ…‹ã¸æˆ»ã‚‹
Â  Â  Â  Â  setWalkState('before');
Â  Â  }
});


  // ãƒ›ãƒ¼ãƒ ã‚¢ã‚¤ã‚³ãƒ³ã®å‡¦ç† (data-gotoã®ä»£ã‚ã‚Šã«<a>ã‚¿ã‚°ã‚’ä½¿ç”¨)
  const homeIcon = document.querySelector('.home-icon a');
  if (homeIcon) {
    // ãƒ›ãƒ¼ãƒ ã‚¢ã‚¤ã‚³ãƒ³ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸã‚‰ã€çŠ¬ç¨®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ä»˜ã‘ã¦ index.htmlã¸é·ç§»
    homeIcon.addEventListener('click', (e) => {
        e.preventDefault();
        window.location.href = `index.html?dog=${selectedDog}`;
    });
  }
</script>
</body>
</html>
